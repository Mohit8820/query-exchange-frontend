"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[881],{2881:function(e,n,s){s.r(n),s.d(n,{default:function(){return g}});var a=s(5861),t=s(4942),l=s(1413),r=s(885),o=s(4687),i=s.n(o),c=s(2791),u=s(6871),d=s(9808),p=s(8287),m=s(6231),h=s(5152),x=s(6308),f=s(184),g=function(e){var n=(0,c.useContext)(d.V),s=(0,u.TH)(),o=(0,c.useState)(!1),g=(0,r.Z)(o,2),v=g[0],j=g[1],w=(0,p.x)(),b=w.isLoading,y=w.error,k=w.sendRequest,C=w.clearError,S=(0,c.useState)({name:"",email:"",password:""}),Z=(0,r.Z)(S,2),E=Z[0],N=Z[1],q=function(e){var n=e.target,s=n.name,a=n.value;N((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,t.Z)({},s,a))}))},P=(0,u.s0)(),F=function(){var e=(0,a.Z)(i().mark((function e(){var s,a,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("validEmail"),console.log(O),console.log("validPassword"),console.log(R),s=v?"signup":"login",a=v?{name:E.name,email:E.email,password:E.password}:{email:E.email,password:E.password},e.prev=6,e.next=9,k("https://query-portal-backend.herokuapp.com/api/users/"+s,"POST",JSON.stringify(a),{"Content-Type":"application/json"});case 9:t=e.sent,n.login(t.userId,t.token),P("/home"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),N({name:"",email:"",password:""});case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){"false"===s.state?j(!1):j(!0),console.log(v)}),[s.state]);var L=(0,c.useState)(null),D=(0,r.Z)(L,2),O=D[0],T=D[1],z=(0,c.useState)(null),A=(0,r.Z)(z,2),R=A[0],$=A[1],H=function(e){return/\S+@\S+\.\S+/.test(e)};return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(m.Z,{error:y,onClear:C}),(0,f.jsxs)("div",{className:"auth-container",children:[b&&(0,f.jsx)(h.Z,{asOverlay:!0}),!v&&(0,f.jsx)("img",{src:x,alt:"stack overflow",className:"login-logo"}),(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$").test(E.password);$(n?null:"Password is invalid"),console.log("pass"),console.log(R),H(E.email)?T(null):T("Email is invalid"),n&&H(E.email)&&F()},children:[v&&(0,f.jsxs)("label",{htmlFor:"name",children:[(0,f.jsx)("h4",{children:"Display Name"}),(0,f.jsx)("input",{type:"text",id:"name",name:"name",onChange:q,value:E.name,maxLength:"6",required:!0})]}),(0,f.jsxs)("label",{htmlFor:"email",children:[(0,f.jsx)("h4",{children:"Email"}),(0,f.jsx)("input",{type:"email",name:"email",id:"email",onChange:q,value:E.email,onClick:function(){return T(null)},required:!0}),O&&(0,f.jsx)("span",{children:O})]}),(0,f.jsxs)("label",{htmlFor:"password",children:[(0,f.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,f.jsx)("h4",{children:"Password"})}),(0,f.jsx)("input",{type:"password",name:"password",id:"password",onChange:q,value:E.password,onClick:function(){return $(null)},required:!0}),R&&(0,f.jsx)("span",{children:R}),v&&(0,f.jsx)("p",{style:{color:"#666767",fontSize:"13px"},children:"Passwords must contain at least six characters, including at least 1 letter and 1 number."})]}),(0,f.jsx)("button",{type:"submit",className:"filled-btn",children:v?"Sign up":"Log in"})]}),(0,f.jsxs)("p",{children:[v?"Already have an account?":"Don't have an account?",(0,f.jsx)("button",{type:"button",className:"text-btn",onClick:function(){j(!v)},children:v?"Log in":"sign up"})]})]})]})}}}]);
//# sourceMappingURL=881.7d61e319.chunk.js.map